---
debug: true

api:
  client:
    url: http://0.0.0.0:8080
    security:
      # admin
      # bearer_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlcyI6WyJhZG1pbiJdLCJpc3MiOiJvc2FwaSIsInN1YiI6ImpvaG5AZGV3ZXkud3MiLCJhdWQiOlsiaHR0cHM6Ly9sb2NhbGhvc3QiLCJodHRwOi8vbG9jYWxob3N0Il0sImV4cCI6MTc0MDg2NDIxNywiaWF0IjoxNzMyOTE1NDE3fQ.0YBwFSKXs2G16TACO-uDsIklPhaYNw63-q95IeNuneU
      # read
      bearer_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlcyI6WyJhZG1pbiJdLCJpc3MiOiJvc2FwaSIsInN1YiI6ImpvaG5AZGV3ZXkud3MiLCJhdWQiOlsiaHR0cHM6Ly9sb2NhbGhvc3QiLCJodHRwOi8vbG9jYWxob3N0Il0sImV4cCI6MTc3ODk2MjI3MiwiaWF0IjoxNzcxMjc2MjcyfQ.G_Ezc7J1lGPQdAtWumObuCFMMi4zPIErNk7dD__66Rk
  server:
    port: 8080
    security:
      # openssl rand -hex 32
      signing_key: 111fdb0cfd9788fa6af8815f856a0374bf7a0174ad62fa8b98ec07a55f68d8d8
      cors:
        allow_origins:
          - http://localhost:3001
          - https://retr0h.github.io

nats:
  server:
    host: localhost
    port: 4222
    store_dir: .nats/jetstream/

job:
  stream_name: JOBS
  stream_subjects: jobs.>
  kv_bucket: job-queue
  kv_response_bucket: job-responses
  consumer_name: jobs-worker

  stream:
    max_age: 24h
    max_msgs: 10000
    storage: file
    replicas: 1
    discard: old

  consumer:
    max_deliver: 5
    ack_wait: 2m
    max_ack_pending: 1000
    replay_policy: instant
    back_off:
      - 30s
      - 2m
      - 5m
      - 15m
      - 30m

  kv:
    ttl: 1h
    max_bytes: 104857600
    storage: file
    replicas: 1

  dlq:
    max_age: 7d
    max_msgs: 1000
    storage: file
    replicas: 1

  client:
    host: localhost
    port: 4222
    client_name: osapi-jobs-cli

  worker:
    host: localhost
    port: 4222
    client_name: osapi-job-worker
    queue_group: job-workers
    hostname: ""  # defaults to system hostname
    max_jobs: 10
