---
date: 2026-02-15
---

## Summary

Continued the service cleanup and job system migration. Completed Phases
1-4. Phase 4 was the largest change — porting the entire network API from
non-strict direct-provider handlers to strict-server with job client.

## Changes

### Phase 4: Port network API to strict-server + job client
- `internal/api/network/gen/cfg.yaml` — enabled strict-server
- `internal/api/network/gen/api.yaml` — added BearerAuth security, kept
  validation tags
- `internal/api/network/gen/network.gen.go` — regenerated
- `internal/api/network/types.go` — providers → JobClient
- `internal/api/network/network.go` — StrictServerInterface
- `internal/api/network/network_dns_get_by_interface.go` — rewritten
- `internal/api/network/network_dns_put_by_interface.go` — rewritten
- `internal/api/network/network_ping_post.go` — rewritten
- `internal/api/handler_network.go` — rewritten (strict + scope middleware)
- `internal/api/handler.go` — removed appFs parameter
- `internal/api/manager.go` — simplified interface
- `cmd/api_server_start.go` — removed appFs from CreateHandlers
- Deleted 3 old integration tests
- Created 3 new public test files

### Task tracking
- Created `2026-02-15-api-endpoint-validation-audit.md` (backlog)
- Created `2026-02-15-update-docusaurus-docs.md` (backlog)
- Updated Phase 6 task to reference validation audit

## Decisions

- Preserved validation tags (`x-oapi-codegen-extra-tags`) in OpenAPI spec
  per user request — validation on struct fields still works with
  strict-server since generated structs carry the tags
- Kept `validator.New()` calls in handlers for request body validation
- Kept `network.ErrorResponse` as-is (has `code` and `details` fields
  that common ErrorResponse doesn't have)

## Next Steps

- Phase 5: Delete legacy task system
- Phase 6: Consistency pass and test coverage audit
- Docusaurus docs update
- API endpoint validation audit
