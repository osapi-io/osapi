"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[7044],{57298(e,s,t){t.r(s),t.d(s,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>l});var n=t(74848),i=t(28453);const o={title:"API endpoint to list registered NATS workers",status:"done",created:new Date("2026-02-17T00:00:00.000Z"),updated:new Date("2026-02-17T00:00:00.000Z")},r=void 0,a={id:"sidebar/development/tasks/done/2026-02-17-feat-api-list-nats-workers",title:"API endpoint to list registered NATS workers",description:"Objective",source:"@site/docs/sidebar/development/tasks/done/2026-02-17-feat-api-list-nats-workers.md",sourceDirName:"sidebar/development/tasks/done",slug:"/sidebar/development/tasks/done/2026-02-17-feat-api-list-nats-workers",permalink:"/osapi/sidebar/development/tasks/done/2026-02-17-feat-api-list-nats-workers",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"API endpoint to list registered NATS workers",status:"done",created:"2026-02-17T00:00:00.000Z",updated:"2026-02-17T00:00:00.000Z"},sidebar:"testSidebar",previous:{title:"Add AI policy to the project",permalink:"/osapi/sidebar/development/tasks/done/2026-02-17-docs-add-ai-policy"},next:{title:"Add consistent host targeting to all CLI commands",permalink:"/osapi/sidebar/development/tasks/done/2026-02-17-feat-cli-consistent-host-targeting"}},d={},l=[{value:"Objective",id:"objective",level:2},{value:"Tasks",id:"tasks",level:2},{value:"Design Considerations",id:"design-considerations",level:2},{value:"Notes",id:"notes",level:2}];function c(e){const s={code:"code",h2:"h2",input:"input",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h2,{id:"objective",children:"Objective"}),"\n",(0,n.jsx)(s.p,{children:"Add a REST API endpoint that lists which workers are currently\nregistered/connected to NATS. This gives operators visibility into the fleet \u2014\nwhich hosts are online, what they're subscribed to, and their availability."}),"\n",(0,n.jsx)(s.h2,{id:"tasks",children:"Tasks"}),"\n",(0,n.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,n.jsxs)(s.li,{className:"task-list-item",children:[(0,n.jsx)(s.input,{type:"checkbox",disabled:!0})," Determine data source (NATS server monitoring API, consumer info, or\nheartbeat-based registration in KV)"]}),"\n",(0,n.jsxs)(s.li,{className:"task-list-item",children:[(0,n.jsx)(s.input,{type:"checkbox",disabled:!0})," Design API response schema (hostname, subscriptions, connected since, last\nseen, etc.)"]}),"\n",(0,n.jsxs)(s.li,{className:"task-list-item",children:[(0,n.jsx)(s.input,{type:"checkbox",disabled:!0})," Add OpenAPI spec for endpoint (e.g., ",(0,n.jsx)(s.code,{children:"GET /workers"})," or ",(0,n.jsx)(s.code,{children:"GET /job/workers"}),")"]}),"\n",(0,n.jsxs)(s.li,{className:"task-list-item",children:[(0,n.jsx)(s.input,{type:"checkbox",disabled:!0})," Implement handler"]}),"\n",(0,n.jsxs)(s.li,{className:"task-list-item",children:[(0,n.jsx)(s.input,{type:"checkbox",disabled:!0})," Add CLI command (",(0,n.jsx)(s.code,{children:"osapi client worker list"})," or similar)"]}),"\n",(0,n.jsxs)(s.li,{className:"task-list-item",children:[(0,n.jsx)(s.input,{type:"checkbox",disabled:!0})," Add tests"]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"design-considerations",children:"Design Considerations"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"NATS server monitoring"}),": The NATS server exposes connection and\nsubscription info via its monitoring port. Could query this directly."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Consumer-based"}),": Query JetStream consumer info to see active consumers on\nthe JOBS stream."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Heartbeat/KV-based"}),": Workers could write periodic heartbeats to a KV bucket\n(e.g., ",(0,n.jsx)(s.code,{children:"workers.{hostname}"})," with TTL). This is the most reliable approach for\nknowing who is actually alive."]}),"\n",(0,n.jsxs)(s.li,{children:["The heartbeat approach would also support the ",(0,n.jsx)(s.code,{children:"_all"})," broadcast use case \u2014\nknowing how many workers to expect responses from."]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"notes",children:"Notes"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Related to the CLI host targeting task \u2014 knowing which hosts exist helps users\ndecide what to target"}),"\n",(0,n.jsx)(s.li,{children:"Could be used by a future health endpoint to report worker availability"}),"\n",(0,n.jsx)(s.li,{children:"The nats-server sibling repo may already expose some of this info"}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453(e,s,t){t.d(s,{R:()=>r,x:()=>a});var n=t(96540);const i={},o=n.createContext(i);function r(e){const s=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);