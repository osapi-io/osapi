"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[8220],{70920(e,t,n){n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>a,toc:()=>l});var i=n(74848),s=n(28453);const o={title:"Support audit log export to alternative backends",status:"done",created:new Date("2026-02-21T00:00:00.000Z"),updated:new Date("2026-02-21T00:00:00.000Z")},r=void 0,a={id:"sidebar/development/tasks/done/2026-02-21-feat-audit-log-export-backends",title:"Support audit log export to alternative backends",description:"Objective",source:"@site/docs/sidebar/development/tasks/done/2026-02-21-feat-audit-log-export-backends.md",sourceDirName:"sidebar/development/tasks/done",slug:"/sidebar/development/tasks/done/2026-02-21-feat-audit-log-export-backends",permalink:"/osapi/sidebar/development/tasks/done/2026-02-21-feat-audit-log-export-backends",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Support audit log export to alternative backends",status:"done",created:"2026-02-21T00:00:00.000Z",updated:"2026-02-21T00:00:00.000Z"},sidebar:"testSidebar",previous:{title:"Add Features documentation section",permalink:"/osapi/sidebar/development/tasks/done/2026-02-21-docs-features-section"},next:{title:"RBAC enforcement with fine-grained permissions",permalink:"/osapi/sidebar/development/tasks/done/2026-02-21-feat-rbac-enforcement"}},d={},l=[{value:"Objective",id:"objective",level:2},{value:"Context",id:"context",level:2},{value:"Potential Backends",id:"potential-backends",level:2},{value:"Outcome",id:"outcome",level:2},{value:"New files",id:"new-files",level:3},{value:"CLI usage",id:"cli-usage",level:3}];function c(e){const t={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"objective",children:"Objective"}),"\n",(0,i.jsx)(t.p,{children:"Add support for exporting audit logs to backends beyond NATS KV, starting with\nfile-based export. This enables long-term retention and integration with\nexternal log aggregation systems."}),"\n",(0,i.jsx)(t.h2,{id:"context",children:"Context"}),"\n",(0,i.jsx)(t.p,{children:"Audit logs are currently stored only in a NATS KV bucket with a configurable TTL\n(default 30 days). For compliance and operational needs, organizations may want\nto export audit entries to durable storage that outlives the KV TTL."}),"\n",(0,i.jsx)(t.h2,{id:"potential-backends",children:"Potential Backends"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"File"})," \u2014 append-only JSON lines file, rotated by size or date"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"S3"})," \u2014 object storage for cloud deployments"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Syslog"})," \u2014 integration with existing log infrastructure"]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"outcome",children:"Outcome"}),"\n",(0,i.jsxs)(t.p,{children:["Implemented file-based audit log export with a pluggable ",(0,i.jsx)(t.code,{children:"Exporter"})," interface\nthat supports future backends (S3, syslog)."]}),"\n",(0,i.jsx)(t.h3,{id:"new-files",children:"New files"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"internal/audit/export/types.go"})," \u2014 Exporter interface, Fetcher type, Result\nstruct"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"internal/audit/export/file.go"})," \u2014 FileExporter (JSONL format)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"internal/audit/export/export.go"})," \u2014 Run orchestrator with pagination and\nprogress callbacks"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"internal/audit/export/file_public_test.go"})," \u2014 FileExporter tests"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"internal/audit/export/export_public_test.go"})," \u2014 Orchestrator tests"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"cmd/client_audit_export.go"})," \u2014 CLI command"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"docs/docs/sidebar/usage/cli/client/audit/export.md"})," \u2014 Documentation"]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"cli-usage",children:"CLI usage"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"osapi client audit export --output audit.jsonl [--type file] [--batch-size 100]\n"})})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453(e,t,n){n.d(t,{R:()=>r,x:()=>a});var i=n(96540);const s={},o=i.createContext(s);function r(e){const t=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);