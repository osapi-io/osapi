"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2699],{83512(e,s,n){n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>l});var t=n(74848),r=n(28453);const o={title:"Enhance health status with workers and consumers",status:"backlog",created:new Date("2026-02-26T00:00:00.000Z"),updated:new Date("2026-02-26T00:00:00.000Z")},i=void 0,a={id:"sidebar/development/tasks/backlog/2026-02-26-feat-health-status-enhancements",title:"Enhance health status with workers and consumers",description:"Objective",source:"@site/docs/sidebar/development/tasks/backlog/2026-02-26-feat-health-status-enhancements.md",sourceDirName:"sidebar/development/tasks/backlog",slug:"/sidebar/development/tasks/backlog/2026-02-26-feat-health-status-enhancements",permalink:"/osapi/sidebar/development/tasks/backlog/2026-02-26-feat-health-status-enhancements",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Enhance health status with workers and consumers",status:"backlog",created:"2026-02-26T00:00:00.000Z",updated:"2026-02-26T00:00:00.000Z"},sidebar:"testSidebar",previous:{title:"CLI taxonomy reorganization",permalink:"/osapi/sidebar/development/tasks/backlog/2026-02-26-cli-taxonomy-reorganization"},next:{title:"Sessions",permalink:"/osapi/category/sessions"}},c={},l=[{value:"Objective",id:"objective",level:2},{value:"Changes",id:"changes",level:2},{value:"Show registered workers",id:"show-registered-workers",level:3},{value:"Show registry bucket in KV Buckets table",id:"show-registry-bucket-in-kv-buckets-table",level:3},{value:"Show consumers (stretch)",id:"show-consumers-stretch",level:3},{value:"Notes",id:"notes",level:2}];function d(e){const s={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h2,{id:"objective",children:"Objective"}),"\n",(0,t.jsxs)(s.p,{children:["Enrich the ",(0,t.jsx)(s.code,{children:"client health status"})," output with worker registry and consumer\ninformation so operators get a complete operational overview from a single\ncommand."]}),"\n",(0,t.jsx)(s.h2,{id:"changes",children:"Changes"}),"\n",(0,t.jsx)(s.h3,{id:"show-registered-workers",children:"Show registered workers"}),"\n",(0,t.jsxs)(s.p,{children:["Read the ",(0,t.jsx)(s.code,{children:"worker-registry"})," KV bucket and display a Workers section:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"  Workers: 3 registered\n  \u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n  \u2503 HOSTNAME                  \u2503 LABELS          \u2503 REGISTERED \u2503\n  \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u254b\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u254b\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252b\n  \u2503 web-01                    \u2503 group=web.prod  \u2503 15s ago    \u2503\n  \u2503 web-02                    \u2503 group=web.prod  \u2503 8s ago     \u2503\n  \u2503 db-01                     \u2503 group=db        \u2503 2m ago     \u2503\n  \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u253b\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u253b\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\n"})}),"\n",(0,t.jsxs)(s.p,{children:["The registry KV bucket uses a 30s TTL, so only live workers appear. The\n",(0,t.jsx)(s.code,{children:"REGISTERED"})," column shows the age of ",(0,t.jsx)(s.code,{children:"registered_at"})," from the\n",(0,t.jsx)(s.code,{children:"WorkerRegistration"})," entry."]}),"\n",(0,t.jsx)(s.h3,{id:"show-registry-bucket-in-kv-buckets-table",children:"Show registry bucket in KV Buckets table"}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"worker-registry"})," bucket should appear alongside ",(0,t.jsx)(s.code,{children:"job-queue"})," in the existing\nKV Buckets table. Investigate why it currently does not \u2014 the health endpoint\nmay be filtering to specific bucket names rather than listing all buckets."]}),"\n",(0,t.jsx)(s.h3,{id:"show-consumers-stretch",children:"Show consumers (stretch)"}),"\n",(0,t.jsx)(s.p,{children:"Add a Consumers section showing JetStream consumer details per stream. This\nwould help operators see which workers have active subscriptions and whether\nconsumers are lagging:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"  Consumers (osapi-JOBS):\n  \u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n  \u2503 NAME                      \u2503 PENDING  \u2503 ACKED   \u2503\n  \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u254b\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u254b\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252b\n  \u2503 query_any_web_01          \u2503 0        \u2503 142     \u2503\n  \u2503 query_direct_web_01       \u2503 0        \u2503 38      \u2503\n  \u2503 modify_any_web_01         \u2503 1        \u2503 15      \u2503\n  \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u253b\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u253b\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\n"})}),"\n",(0,t.jsx)(s.p,{children:"This is lower priority \u2014 the worker list covers the main operational need.\nConsumer details are useful for debugging but may be noisy with many workers."}),"\n",(0,t.jsx)(s.h2,{id:"notes",children:"Notes"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"The health status API response schema will need new fields for workers and\noptionally consumers"}),"\n",(0,t.jsx)(s.li,{children:"The SDK and CLI will need updates to render the new sections"}),"\n",(0,t.jsxs)(s.li,{children:["Consider adding a ",(0,t.jsx)(s.code,{children:"--verbose"})," flag to show consumers only when requested"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453(e,s,n){n.d(s,{R:()=>i,x:()=>a});var t=n(96540);const r={},o=t.createContext(r);function i(e){const s=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(o.Provider,{value:s},e.children)}}}]);