"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[5935],{19863(e,t,n){n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>i,default:()=>p,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var o=n(74848),r=n(28453);const s={title:"Improve tracing exporter options (OTLP auth, logger exporter)",status:"backlog",created:new Date("2026-02-22T00:00:00.000Z"),updated:new Date("2026-02-22T00:00:00.000Z")},i=void 0,l={id:"sidebar/development/tasks/backlog/2026-02-22-feat-otlp-auth-logging-exporter",title:"Improve tracing exporter options (OTLP auth, logger exporter)",description:"Objective",source:"@site/docs/sidebar/development/tasks/backlog/2026-02-22-feat-otlp-auth-logging-exporter.md",sourceDirName:"sidebar/development/tasks/backlog",slug:"/sidebar/development/tasks/backlog/2026-02-22-feat-otlp-auth-logging-exporter",permalink:"/osapi/sidebar/development/tasks/backlog/2026-02-22-feat-otlp-auth-logging-exporter",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Improve tracing exporter options (OTLP auth, logger exporter)",status:"backlog",created:"2026-02-22T00:00:00.000Z",updated:"2026-02-22T00:00:00.000Z"},sidebar:"testSidebar",previous:{title:"Client SDK for programmatic automation",permalink:"/osapi/sidebar/development/tasks/backlog/2026-02-22-feat-client-sdk"},next:{title:"Sessions",permalink:"/osapi/category/sessions"}},a={},c=[{value:"Objective",id:"objective",level:2},{value:"Context",id:"context",level:2},{value:"Proposed Config",id:"proposed-config",level:2},{value:"Notes",id:"notes",level:2}];function d(e){const t={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h2,{id:"objective",children:"Objective"}),"\n",(0,o.jsx)(t.p,{children:"Improve the tracing exporter configuration with two changes:"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.strong,{children:"OTLP authentication"})," -- the current OTLP exporter uses\n",(0,o.jsx)(t.code,{children:"otlptracegrpc.WithInsecure()"})," with no auth. This only works for\nlocal/internal backends (e.g., Jaeger on localhost). Cloud backends like\nGrafana Cloud, Honeycomb, and Datadog require TLS and/or API key headers. Add\nconfig options for TLS and auth headers."]}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.strong,{children:"Logger-based exporter"})," -- the ",(0,o.jsx)(t.code,{children:"stdout"})," exporter dumps raw OpenTelemetry\nspan JSON directly to stdout, bypassing the structured logger. This is noisy\nand doesn't go wherever logs are routed. Add a ",(0,o.jsx)(t.code,{children:"log"})," exporter option that\nwrites span data through the structured ",(0,o.jsx)(t.code,{children:"slog"})," logger so spans follow the\nsame output path as all other log lines."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"context",children:"Context"}),"\n",(0,o.jsxs)(t.p,{children:["Current code in ",(0,o.jsx)(t.code,{children:"internal/telemetry/telemetry.go"}),":"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-go",children:'case "otlp":\n    exp, err := otlptraceNewFn(\n        ctx,\n        otlptracegrpc.WithEndpoint(cfg.OTLPEndpoint),\n        otlptracegrpc.WithInsecure(), // no TLS, no auth\n    )\n'})}),"\n",(0,o.jsxs)(t.p,{children:["The ",(0,o.jsx)(t.code,{children:"stdout"})," exporter uses ",(0,o.jsx)(t.code,{children:"stdouttrace.New(stdouttrace.WithPrettyPrint())"}),"\nwhich writes directly to ",(0,o.jsx)(t.code,{children:"os.Stdout"}),"."]}),"\n",(0,o.jsx)(t.h2,{id:"proposed-config",children:"Proposed Config"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-yaml",children:'telemetry:\n  tracing:\n    enabled: true\n    exporter: otlp # "stdout", "log", "otlp", or unset\n    otlp_endpoint: localhost:4317\n    otlp_insecure: true # default false (use TLS)\n    otlp_headers: # optional auth headers\n      Authorization: \'Bearer <token>\'\n'})}),"\n",(0,o.jsx)(t.h2,{id:"notes",children:"Notes"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["The ",(0,o.jsx)(t.code,{children:"log"})," exporter could use the ",(0,o.jsx)(t.code,{children:"stdouttrace"})," exporter writing to an\n",(0,o.jsx)(t.code,{children:"io.Writer"})," backed by the slog handler, or implement a custom ",(0,o.jsx)(t.code,{children:"SpanExporter"}),"\nthat logs span summaries as structured log entries."]}),"\n",(0,o.jsxs)(t.li,{children:["For OTLP TLS: replace ",(0,o.jsx)(t.code,{children:"WithInsecure()"})," with\n",(0,o.jsx)(t.code,{children:"WithTLSCredentials(credentials.NewTLS(...))"})," when ",(0,o.jsx)(t.code,{children:"otlp_insecure"})," is false."]}),"\n",(0,o.jsxs)(t.li,{children:["For OTLP headers: use ",(0,o.jsx)(t.code,{children:"otlptracegrpc.WithHeaders(cfg.OTLPHeaders)"}),"."]}),"\n",(0,o.jsx)(t.li,{children:"Update feature docs and configuration reference when implemented."}),"\n"]})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453(e,t,n){n.d(t,{R:()=>i,x:()=>l});var o=n(96540);const r={},s=o.createContext(r);function i(e){const t=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);