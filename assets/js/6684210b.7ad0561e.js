"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[5242],{57842(e,t,n){n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var s=n(74848),a=n(28453);const i={title:"Evaluate query param validation strategy",status:"backlog",created:new Date("2026-02-21T00:00:00.000Z"),updated:new Date("2026-02-21T00:00:00.000Z")},r=void 0,o={id:"sidebar/development/tasks/backlog/2026-02-21-discuss-query-param-validation",title:"Evaluate query param validation strategy",description:"Objective",source:"@site/docs/sidebar/development/tasks/backlog/2026-02-21-discuss-query-param-validation.md",sourceDirName:"sidebar/development/tasks/backlog",slug:"/sidebar/development/tasks/backlog/2026-02-21-discuss-query-param-validation",permalink:"/osapi/sidebar/development/tasks/backlog/2026-02-21-discuss-query-param-validation",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Evaluate query param validation strategy",status:"backlog",created:"2026-02-21T00:00:00.000Z",updated:"2026-02-21T00:00:00.000Z"},sidebar:"testSidebar",previous:{title:"Add custom OTel metrics for jobs, workers, and NATS",permalink:"/osapi/sidebar/development/tasks/backlog/2026-02-20-feat-metrics-endpoint"},next:{title:"Sessions",permalink:"/osapi/category/sessions"}},d={},l=[{value:"Objective",id:"objective",level:2},{value:"Context",id:"context",level:2},{value:"Options",id:"options",level:2},{value:"Notes",id:"notes",level:2}];function c(e){const t={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"objective",children:"Objective"}),"\n",(0,s.jsx)(t.p,{children:"Decide whether to keep manual query parameter validation or adopt a different\napproach."}),"\n",(0,s.jsx)(t.h2,{id:"context",children:"Context"}),"\n",(0,s.jsxs)(t.p,{children:["oapi-codegen generates ",(0,s.jsx)(t.code,{children:"validate:"})," struct tags from ",(0,s.jsx)(t.code,{children:"x-oapi-codegen-extra-tags"}),"\non ",(0,s.jsx)(t.strong,{children:"request body properties"})," but NOT on ",(0,s.jsx)(t.strong,{children:"query parameters"}),". This means:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Request bodies: ",(0,s.jsx)(t.code,{children:"validation.Struct(request.Body)"})," works automatically with\ntags like ",(0,s.jsx)(t.code,{children:'validate:"required,ip"'}),"."]}),"\n",(0,s.jsx)(t.li,{children:"Query params: require manual validation in the handler using temporary structs\nwith validate tags (current approach)."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"This creates an inconsistency \u2014 body input gets auto-validated, query params\nneed handwritten validation code that can be missed."}),"\n",(0,s.jsx)(t.h2,{id:"options",children:"Options"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Keep current approach"})," (manual validation for query params). Pros:\nidiomatic REST (GET with query params for reads). Well-documented in\nCLAUDE.md. Cons: easy to forget, extra boilerplate."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Use POST with request bodies for complex queries"}),". Pros: auto-generated\nvalidate tags, single ",(0,s.jsx)(t.code,{children:"validation.Struct()"})," call. Cons: non-standard REST\n(POST for reads), breaks client expectations."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Write a helper that validates query params from the OpenAPI spec\nconstraints"}),". Pros: avoids manual structs, stays RESTful. Cons: custom code\nto maintain."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Contribute upstream"})," to oapi-codegen to support validate tags on query\nparams."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"notes",children:"Notes"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Current domains affected: job (list), audit (list), system (status)."}),"\n",(0,s.jsx)(t.li,{children:'The manual approach is documented in CLAUDE.md under "Validation in OpenAPI\nSpecs" with explicit examples and integration test requirements.'}),"\n",(0,s.jsx)(t.li,{children:"Recommendation: keep option 1 for now. The CLAUDE.md documentation and\nintegration test requirements mitigate the risk of missing validation."}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453(e,t,n){n.d(t,{R:()=>r,x:()=>o});var s=n(96540);const a={},i=s.createContext(a);function r(e){const t=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);