"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[614],{18435(e,t,n){n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>d,toc:()=>l});var s=n(74848),r=n(28453);const o={title:"Rename health detailed to health status and enrich with system metrics",status:"done",created:new Date("2026-02-19T00:00:00.000Z"),updated:new Date("2026-02-19T00:00:00.000Z")},i=void 0,d={id:"sidebar/development/tasks/done/2026-02-19-feat-health-status",title:"Rename health detailed to health status and enrich with system metrics",description:"Objective",source:"@site/docs/sidebar/development/tasks/done/2026-02-19-feat-health-status.md",sourceDirName:"sidebar/development/tasks/done",slug:"/sidebar/development/tasks/done/2026-02-19-feat-health-status",permalink:"/osapi/sidebar/development/tasks/done/2026-02-19-feat-health-status",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Rename health detailed to health status and enrich with system metrics",status:"done",created:"2026-02-19T00:00:00.000Z",updated:"2026-02-19T00:00:00.000Z"},sidebar:"testSidebar",previous:{title:"Consistent debug logging across all components",permalink:"/osapi/sidebar/development/tasks/done/2026-02-19-feat-consistent-debug-logging"},next:{title:"Add job retry command",permalink:"/osapi/sidebar/development/tasks/done/2026-02-19-feat-job-retry-command"}},a={},l=[{value:"Objective",id:"objective",level:2},{value:"Outcome",id:"outcome",level:2},{value:"Out of scope (deferred)",id:"out-of-scope-deferred",level:3}];function c(e){const t={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"objective",children:"Objective"}),"\n",(0,s.jsxs)(t.p,{children:["Rename ",(0,s.jsx)(t.code,{children:"/health/detailed"})," to ",(0,s.jsx)(t.code,{children:"/health/status"}),' and make it the single operator\ndebugging view for the entire OSAPI system. Currently it only reports "nats: ok,\nkv: ok" \u2014 it should show everything an operator needs to understand the state of\nthe system.']}),"\n",(0,s.jsx)(t.h2,{id:"outcome",children:"Outcome"}),"\n",(0,s.jsx)(t.p,{children:"Implemented the rename and enriched the endpoint with system metrics:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Rename"}),": ",(0,s.jsx)(t.code,{children:"/health/detailed"})," \u2192 ",(0,s.jsx)(t.code,{children:"/health/status"})," across OpenAPI spec,\nhandler, client, CLI, tests, and docs"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"MetricsProvider"}),": New interface with ",(0,s.jsx)(t.code,{children:"ClosureMetricsProvider"})," for NATS\ninfo, stream stats, KV bucket stats, and job queue counts"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Graceful degradation"}),": Each metric call is independent \u2014 failures are\nlogged and skipped"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"CLI output"}),": Compact inline ",(0,s.jsx)(t.code,{children:"printKV"})," header + tables for multi-row data\n(components, streams, KV buckets)"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"CLI UX overhaul"}),": Replaced ",(0,s.jsx)(t.code,{children:"printStyledMap"})," with ",(0,s.jsx)(t.code,{children:"printKV"})," across all\nclient commands for consistent, column-aligned output"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Docs"}),": Updated all 11 CLI doc pages and architecture docs"]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"out-of-scope-deferred",children:"Out of scope (deferred)"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Workers list (needs consumer enumeration or heartbeat tracking)"}),"\n",(0,s.jsx)(t.li,{children:"Object Store stats (blob store not implemented yet)"}),"\n",(0,s.jsx)(t.li,{children:"job-responses KV bucket stats (not wired in API server)"}),"\n",(0,s.jsx)(t.li,{children:"Per-consumer lag metrics"}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453(e,t,n){n.d(t,{R:()=>i,x:()=>d});var s=n(96540);const r={},o=s.createContext(r);function i(e){const t=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);