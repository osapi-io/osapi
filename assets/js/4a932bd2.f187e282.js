"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[3052],{44283(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>d});var s=t(74848),i=t(28453);const o={title:"Declarative playbook engine (osapi-apply)",status:"backlog",created:new Date("2026-02-25T00:00:00.000Z"),updated:new Date("2026-02-25T00:00:00.000Z")},a=void 0,r={id:"sidebar/development/tasks/backlog/2026-02-25-feat-declarative-playbook-engine",title:"Declarative playbook engine (osapi-apply)",description:"Objective",source:"@site/docs/sidebar/development/tasks/backlog/2026-02-25-feat-declarative-playbook-engine.md",sourceDirName:"sidebar/development/tasks/backlog",slug:"/sidebar/development/tasks/backlog/2026-02-25-feat-declarative-playbook-engine",permalink:"/osapi/sidebar/development/tasks/backlog/2026-02-25-feat-declarative-playbook-engine",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Declarative playbook engine (osapi-apply)",status:"backlog",created:"2026-02-25T00:00:00.000Z",updated:"2026-02-25T00:00:00.000Z"},sidebar:"testSidebar",previous:{title:"Investigate wrapping SDK gen response types",permalink:"/osapi/sidebar/development/tasks/backlog/2026-02-24-sdk-response-types"},next:{title:"Sessions",permalink:"/osapi/category/sessions"}},l={},d=[{value:"Objective",id:"objective",level:2},{value:"Motivation",id:"motivation",level:2},{value:"Design Considerations",id:"design-considerations",level:2},{value:"Notes",id:"notes",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"objective",children:"Objective"}),"\n",(0,s.jsxs)(n.p,{children:["Build a declarative automation layer on top of the ",(0,s.jsx)(n.code,{children:"osapi-sdk"})," that parses YAML\ntask files and executes steps via the SDK \u2014 similar to Ansible playbooks but\nsimpler. This is the planned ",(0,s.jsx)(n.code,{children:"osapi-apply"})," orchestration tool."]}),"\n",(0,s.jsx)(n.h2,{id:"motivation",children:"Motivation"}),"\n",(0,s.jsxs)(n.p,{children:["The SDK provides composable primitives (",(0,s.jsx)(n.code,{children:"client.Command.Exec()"}),",\n",(0,s.jsx)(n.code,{children:"client.Network.DNS.Get()"}),", etc.) for programmatic Go usage. A declarative\nengine would let operators define desired system state in YAML and apply it\nwithout writing Go code:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"tasks:\n  - name: Set DNS servers\n    network.dns.update:\n      interface: eth0\n      servers: [1.1.1.1, 8.8.8.8]\n      target: _all\n\n  - name: Verify connectivity\n    command.exec:\n      command: ping\n      args: [-c, '1', '1.1.1.1']\n      target: _all\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"changed"}),' field added to mutation responses is the foundation for reporting\nconvergence status (e.g., "3 of 5 operations changed, 2 already converged").']}),"\n",(0,s.jsx)(n.h2,{id:"design-considerations",children:"Design Considerations"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Playbook format"})," \u2014 YAML task files with step names, module references, and\nparameters"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Execution model"})," \u2014 sequential steps with optional conditionals and error\nhandling"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Change reporting"})," \u2014 aggregate ",(0,s.jsx)(n.code,{children:"changed"})," status across steps to report\nconvergence"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Targeting"})," \u2014 inherit SDK target routing (",(0,s.jsx)(n.code,{children:"_any"}),", ",(0,s.jsx)(n.code,{children:"_all"}),", hostname, label\nselectors)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Dry-run mode"})," \u2014 preview what would change without applying"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Spun out from the completed\n",(0,s.jsx)(n.a,{href:"/osapi/sidebar/development/tasks/done/2026-02-22-feat-client-sdk",children:"Client SDK task"})," which delivered the\nprogrammatic SDK layer"]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"changed"})," field\n(",(0,s.jsx)(n.a,{href:"/osapi/sidebar/development/tasks/done/2026-02-25-add-changed-field-to-mutation-responses",children:"done"}),") is a\nprerequisite for meaningful convergence reporting"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453(e,n,t){t.d(n,{R:()=>a,x:()=>r});var s=t(96540);const i={},o=s.createContext(i);function a(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);