"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[235],{61136(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>h,default:()=>o,frontMatter:()=>r,metadata:()=>d,toc:()=>c});var t=s(74848),i=s(28453);const r={sidebar_position:5},h="Health Checks",d={id:"sidebar/features/health-checks",title:"Health Checks",description:"OSAPI exposes health endpoints for load balancers, monitoring systems, and",source:"@site/docs/sidebar/features/health-checks.md",sourceDirName:"sidebar/features",slug:"/sidebar/features/health-checks",permalink:"/osapi/sidebar/features/health-checks",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"testSidebar",previous:{title:"Audit Logging",permalink:"/osapi/sidebar/features/audit-logging"},next:{title:"Authentication & RBAC",permalink:"/osapi/sidebar/features/authentication"}},a={},c=[{value:"Endpoints",id:"endpoints",level:2},{value:"Liveness (<code>/health</code>)",id:"liveness-health",level:3},{value:"Readiness (<code>/health/ready</code>)",id:"readiness-healthready",level:3},{value:"Status (<code>/health/status</code>)",id:"status-healthstatus",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Permissions",id:"permissions",level:2},{value:"Related",id:"related",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"health-checks",children:"Health Checks"})}),"\n",(0,t.jsx)(n.p,{children:"OSAPI exposes health endpoints for load balancers, monitoring systems, and\noperational tooling. These endpoints report whether the API server is alive,\nready to serve traffic, and the status of its dependencies."}),"\n",(0,t.jsx)(n.h2,{id:"endpoints",children:"Endpoints"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Endpoint"}),(0,t.jsx)(n.th,{children:"Auth Required"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/health"})}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"Liveness probe -- is the process alive?"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/health/ready"})}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"Readiness probe -- can it serve traffic?"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/health/status"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Detailed status with component health metrics"})]})]})]}),"\n",(0,t.jsxs)(n.h3,{id:"liveness-health",children:["Liveness (",(0,t.jsx)(n.code,{children:"/health"}),")"]}),"\n",(0,t.jsxs)(n.p,{children:["Always returns ",(0,t.jsx)(n.code,{children:"200 OK"})," if the process is running. Use this for container\norchestrators (e.g., Kubernetes liveness probes) to detect hung processes."]}),"\n",(0,t.jsxs)(n.h3,{id:"readiness-healthready",children:["Readiness (",(0,t.jsx)(n.code,{children:"/health/ready"}),")"]}),"\n",(0,t.jsxs)(n.p,{children:["Checks connectivity to NATS and KV stores. Returns ",(0,t.jsx)(n.code,{children:"200 OK"})," when the API server\ncan process requests, or ",(0,t.jsx)(n.code,{children:"503 Service Unavailable"})," when dependencies are down.\nUse this for load balancer health checks to avoid routing traffic to an unready\ninstance."]}),"\n",(0,t.jsxs)(n.h3,{id:"status-healthstatus",children:["Status (",(0,t.jsx)(n.code,{children:"/health/status"}),")"]}),"\n",(0,t.jsxs)(n.p,{children:["Returns per-component health with system metrics (uptime, goroutine count,\nmemory usage). Requires authentication with the ",(0,t.jsx)(n.code,{children:"health:read"})," permission. Use\nthis for dashboards and monitoring."]}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["Health check endpoints (",(0,t.jsx)(n.code,{children:"/health"})," and ",(0,t.jsx)(n.code,{children:"/health/ready"}),") are unauthenticated by\ndesign -- they need to work before clients have tokens. The ",(0,t.jsx)(n.code,{children:"/health/status"}),"\nendpoint requires a valid JWT with the ",(0,t.jsx)(n.code,{children:"health:read"})," permission."]}),"\n",(0,t.jsxs)(n.p,{children:["No specific configuration is needed for health checks beyond the standard server\nand authentication settings. See ",(0,t.jsx)(n.a,{href:"/osapi/sidebar/usage/configuration",children:"Configuration"})," for\nthe full reference, ",(0,t.jsx)(n.a,{href:"/osapi/sidebar/usage/cli/client/health/",children:"CLI Reference"})," for\nusage and examples, or the ",(0,t.jsx)(n.a,{href:"/gen/api/health-check-api-health",children:"API Reference"})," for\nthe REST endpoints."]}),"\n",(0,t.jsx)(n.h2,{id:"permissions",children:"Permissions"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Endpoint"}),(0,t.jsx)(n.th,{children:"Permission"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/health"})}),(0,t.jsx)(n.td,{children:"None"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/health/ready"})}),(0,t.jsx)(n.td,{children:"None"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/health/status"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"health:read"})})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["All built-in roles (",(0,t.jsx)(n.code,{children:"admin"}),", ",(0,t.jsx)(n.code,{children:"write"}),", ",(0,t.jsx)(n.code,{children:"read"}),") include ",(0,t.jsx)(n.code,{children:"health:read"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"related",children:"Related"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/osapi/sidebar/usage/cli/client/health/",children:"CLI Reference"})," -- health commands"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/gen/api/health-check-api-health",children:"API Reference"})," -- REST API documentation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/osapi/sidebar/architecture/",children:"Architecture"})," -- system design overview"]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},28453(e,n,s){s.d(n,{R:()=>h,x:()=>d});var t=s(96540);const i={},r=t.createContext(i);function h(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:h(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);