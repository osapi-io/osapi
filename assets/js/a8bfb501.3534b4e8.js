"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[3118],{45018(e,s,n){n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>c});var i=n(74848),r=n(28453);const t={title:"RBAC enforcement with fine-grained permissions",status:"done",created:new Date("2026-02-21T00:00:00.000Z"),updated:new Date("2026-02-21T00:00:00.000Z")},d=void 0,o={id:"sidebar/development/tasks/done/2026-02-21-feat-rbac-enforcement",title:"RBAC enforcement with fine-grained permissions",description:"Objective",source:"@site/docs/sidebar/development/tasks/done/2026-02-21-feat-rbac-enforcement.md",sourceDirName:"sidebar/development/tasks/done",slug:"/sidebar/development/tasks/done/2026-02-21-feat-rbac-enforcement",permalink:"/osapi/sidebar/development/tasks/done/2026-02-21-feat-rbac-enforcement",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"RBAC enforcement with fine-grained permissions",status:"done",created:"2026-02-21T00:00:00.000Z",updated:"2026-02-21T00:00:00.000Z"},sidebar:"testSidebar",previous:{title:"Support audit log export to alternative backends",permalink:"/osapi/sidebar/development/tasks/done/2026-02-21-feat-audit-log-export-backends"},next:{title:"Show worker labels in system hostname output",permalink:"/osapi/sidebar/development/tasks/done/2026-02-21-feat-show-worker-labels"}},l={},c=[{value:"Objective",id:"objective",level:2},{value:"Current State",id:"current-state",level:2},{value:"Design",id:"design",level:2},{value:"Permissions (capabilities)",id:"permissions-capabilities",level:3},{value:"Roles",id:"roles",level:3},{value:"JWT Claims",id:"jwt-claims",level:3},{value:"Middleware Changes",id:"middleware-changes",level:3},{value:"OpenAPI Spec Changes",id:"openapi-spec-changes",level:3},{value:"Backward Compatibility",id:"backward-compatibility",level:3},{value:"External IdP Integration (future)",id:"external-idp-integration-future",level:3},{value:"Implementation Steps",id:"implementation-steps",level:2},{value:"Step 1: Define permissions and role mappings",id:"step-1-define-permissions-and-role-mappings",level:3},{value:"Step 2: Update OpenAPI specs",id:"step-2-update-openapi-specs",level:3},{value:"Step 3: Update middleware",id:"step-3-update-middleware",level:3},{value:"Step 4: Update token CLI",id:"step-4-update-token-cli",level:3},{value:"Step 5: Custom roles in config",id:"step-5-custom-roles-in-config",level:3},{value:"Step 6: Integration tests",id:"step-6-integration-tests",level:3},{value:"Step 7: Documentation",id:"step-7-documentation",level:3},{value:"Notes",id:"notes",level:2},{value:"Outcome",id:"outcome",level:2}];function a(e){const s={code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h2,{id:"objective",children:"Objective"}),"\n",(0,i.jsxs)(s.p,{children:["Today OSAPI has three flat roles (",(0,i.jsx)(s.code,{children:"read"}),", ",(0,i.jsx)(s.code,{children:"write"}),", ",(0,i.jsx)(s.code,{children:"admin"}),") with a simple\nhierarchy baked into ",(0,i.jsx)(s.code,{children:"authtoken.RoleHierarchy"}),". Scopes are declared in OpenAPI\nspecs and enforced by ",(0,i.jsx)(s.code,{children:"scopeMiddleware"}),". This works for basic access control but\nfalls short for multi-tenant or enterprise deployments where:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Different users need different permission sets (operator can restart services\nbut not modify DNS; network admin can change DNS but not view jobs)."}),"\n",(0,i.jsxs)(s.li,{children:["Audit logging (see ",(0,i.jsx)(s.code,{children:"2026-02-15-feat-audit-logging.md"}),") needs to know ",(0,i.jsx)(s.em,{children:"which\nuser"})," performed an action, not just that ",(0,i.jsx)(s.em,{children:"a valid token"})," was used."]}),"\n",(0,i.jsx)(s.li,{children:"Customers will want to map OSAPI permissions to their existing AD/LDAP groups\nor SSO provider roles."}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["The goal is to introduce a capability-based RBAC model \u2014 inspired by Kubernetes\nRBAC and Linux capabilities \u2014 where permissions are granular, composable into\nroles, and the JWT ",(0,i.jsx)(s.code,{children:"sub"})," claim identifies the acting user for audit purposes."]}),"\n",(0,i.jsx)(s.h2,{id:"current-state",children:"Current State"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["JWT claims: ",(0,i.jsx)(s.code,{children:'{ roles: ["admin"], sub: "john@dewey.ws", ... }'})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"RoleHierarchy"})," maps role \u2192 implied scopes: ",(0,i.jsx)(s.code,{children:"admin \u2192 [read, write, admin]"})]}),"\n",(0,i.jsxs)(s.li,{children:["OpenAPI specs declare required scope per endpoint:\n",(0,i.jsx)(s.code,{children:"security: [{ BearerAuth: [read] }]"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"scopeMiddleware"})," checks if any token role implies the required scope"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"hasScope()"})," does the matching; 403 on failure"]}),"\n",(0,i.jsx)(s.li,{children:"No user identity is passed to handlers or logged beyond the JWT claims"}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"unauthenticatedOperations"})," map exempts health probes"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"design",children:"Design"}),"\n",(0,i.jsx)(s.h3,{id:"permissions-capabilities",children:"Permissions (capabilities)"}),"\n",(0,i.jsxs)(s.p,{children:["Define granular permissions modeled after ",(0,i.jsx)(s.code,{children:"resource:verb"})," (Kubernetes style).\nEach OpenAPI endpoint maps to exactly one permission:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"system:read          GET /system/hostname, GET /system/status\nnetwork:read         GET /network/dns/{interface}\nnetwork:write        PUT /network/dns, POST /network/ping\njob:read             GET /job, GET /job/{id}, GET /job/stats, GET /job/workers\njob:write            POST /job, DELETE /job/{id}, POST /job/{id}/retry\nhealth:read          GET /health/status\naudit:read           GET /audit, GET /audit/{id}  (future)\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Health probes (",(0,i.jsx)(s.code,{children:"GET /health"}),", ",(0,i.jsx)(s.code,{children:"GET /health/ready"}),") remain unauthenticated."]}),"\n",(0,i.jsx)(s.h3,{id:"roles",children:"Roles"}),"\n",(0,i.jsx)(s.p,{children:"Roles are named collections of permissions. Built-in roles provide backward\ncompatibility:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"admin     \u2192 [system:read, network:read, network:write, job:read,\n             job:write, health:read, audit:read]\noperator  \u2192 [system:read, network:read, job:read, job:write, health:read]\nread      \u2192 [system:read, network:read, job:read, health:read]\n"})}),"\n",(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.code,{children:"write"})," role maps to ",(0,i.jsx)(s.code,{children:"operator"})," for backward compatibility \u2014 existing tokens\nwith ",(0,i.jsx)(s.code,{children:'roles: ["write"]'})," continue to work."]}),"\n",(0,i.jsx)(s.p,{children:"Custom roles can be defined in config for deployments that need non-standard\ngroupings:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-yaml",children:"api:\n  server:\n    security:\n      roles:\n        network-admin:\n          - network:read\n          - network:write\n        job-viewer:\n          - job:read\n"})}),"\n",(0,i.jsx)(s.h3,{id:"jwt-claims",children:"JWT Claims"}),"\n",(0,i.jsxs)(s.p,{children:["Extend ",(0,i.jsx)(s.code,{children:"CustomClaims"})," to carry the user identity and optionally fine-grained\npermissions:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-go",children:'type CustomClaims struct {\n    Roles       []string `json:"roles" validate:"required,dive"`\n    Permissions []string `json:"permissions,omitempty"`\n    jwt.RegisteredClaims\n}\n'})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"sub"})," (Subject): identifies the user \u2014 required for audit logging"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"roles"}),": maps to built-in or custom role definitions"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"permissions"}),": optional override \u2014 if present, these are used directly instead\nof resolving from roles. This allows an upstream IdP (AD, Okta, Keycloak) to\nembed exact permissions in the token without OSAPI needing to know about the\nIdP's group structure."]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"middleware-changes",children:"Middleware Changes"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"scopeMiddleware"})," changes:"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Resolve effective permissions: if ",(0,i.jsx)(s.code,{children:"claims.Permissions"})," is non-empty, use it\ndirectly; otherwise expand ",(0,i.jsx)(s.code,{children:"claims.Roles"})," through the role \u2192 permission\nmapping."]}),"\n",(0,i.jsx)(s.li,{children:"Check if the required permission (from OpenAPI spec) is in the effective set."}),"\n",(0,i.jsxs)(s.li,{children:["Inject user identity into the request context so handlers and audit logging\ncan access it:\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-go",children:'ctx.Set("auth.subject", claims.Subject)\nctx.Set("auth.roles", claims.Roles)\nctx.Set("auth.permissions", effectivePermissions)\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"openapi-spec-changes",children:"OpenAPI Spec Changes"}),"\n",(0,i.jsxs)(s.p,{children:["Update security schemes in each ",(0,i.jsx)(s.code,{children:"api.yaml"})," to use the new permission names as\nscopes:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-yaml",children:"components:\n  securitySchemes:\n    BearerAuth:\n      type: http\n      scheme: bearer\n      bearerFormat: JWT\n\n# Per endpoint:\nsecurity:\n  - BearerAuth:\n      - system:read\n"})}),"\n",(0,i.jsxs)(s.p,{children:["oapi-codegen will pass ",(0,i.jsx)(s.code,{children:'["system:read"]'})," to the context, and ",(0,i.jsx)(s.code,{children:"scopeMiddleware"}),"\nchecks it against the resolved permission set."]}),"\n",(0,i.jsx)(s.h3,{id:"backward-compatibility",children:"Backward Compatibility"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Existing tokens with ",(0,i.jsx)(s.code,{children:'roles: ["admin"]'})," or ",(0,i.jsx)(s.code,{children:'roles: ["read"]'})," continue to work\n\u2014 the role-to-permission mapping handles expansion."]}),"\n",(0,i.jsxs)(s.li,{children:["The old ",(0,i.jsx)(s.code,{children:"read"}),"/",(0,i.jsx)(s.code,{children:"write"}),"/",(0,i.jsx)(s.code,{children:"admin"})," scope names in OpenAPI specs are replaced with\n",(0,i.jsx)(s.code,{children:"resource:verb"})," permissions, but the middleware resolves old role names\nthrough the mapping."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"osapi token generate --roles admin"})," still works. Add\n",(0,i.jsx)(s.code,{children:"--permissions system:read,job:write"})," flag for fine-grained tokens."]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"external-idp-integration-future",children:"External IdP Integration (future)"}),"\n",(0,i.jsx)(s.p,{children:"The design supports upstream identity providers without code changes:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"OIDC/OAuth2"}),": IdP issues JWTs with ",(0,i.jsx)(s.code,{children:"roles"})," or ",(0,i.jsx)(s.code,{children:"permissions"})," claims that\nOSAPI validates. Map IdP groups \u2192 OSAPI roles in config."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"AD/LDAP"}),": A gateway (e.g., Keycloak, Dex) translates AD groups to JWT\nclaims. OSAPI only sees the JWT."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Custom"}),": Any system that can produce a signed JWT with the expected claims\nstructure works. Configure the signing key or JWKS endpoint."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"This task does NOT implement IdP integration \u2014 it builds the permission model\nthat makes integration straightforward later."}),"\n",(0,i.jsx)(s.h2,{id:"implementation-steps",children:"Implementation Steps"}),"\n",(0,i.jsx)(s.h3,{id:"step-1-define-permissions-and-role-mappings",children:"Step 1: Define permissions and role mappings"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Create ",(0,i.jsx)(s.code,{children:"internal/authtoken/permissions.go"})," with permission constants and the\nrole \u2192 permission mapping."]}),"\n",(0,i.jsxs)(s.li,{children:["Update ",(0,i.jsx)(s.code,{children:"RoleHierarchy"})," to map to permissions instead of the old flat scopes."]}),"\n",(0,i.jsxs)(s.li,{children:["Add ",(0,i.jsx)(s.code,{children:"Permissions"})," field to ",(0,i.jsx)(s.code,{children:"CustomClaims"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"step-2-update-openapi-specs",children:"Step 2: Update OpenAPI specs"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Replace ",(0,i.jsx)(s.code,{children:"read"}),"/",(0,i.jsx)(s.code,{children:"write"})," scopes with ",(0,i.jsx)(s.code,{children:"resource:verb"})," permissions in every\n",(0,i.jsx)(s.code,{children:"api.yaml"})," under ",(0,i.jsx)(s.code,{children:"internal/api/*/gen/"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:["Regenerate with ",(0,i.jsx)(s.code,{children:"just generate"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"step-3-update-middleware",children:"Step 3: Update middleware"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Update ",(0,i.jsx)(s.code,{children:"scopeMiddleware"})," to resolve permissions from roles or use direct\npermissions from claims."]}),"\n",(0,i.jsxs)(s.li,{children:["Inject user identity (",(0,i.jsx)(s.code,{children:"sub"}),", roles, permissions) into Echo context."]}),"\n",(0,i.jsxs)(s.li,{children:["Update ",(0,i.jsx)(s.code,{children:"hasScope"})," \u2192 ",(0,i.jsx)(s.code,{children:"hasPermission"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"step-4-update-token-cli",children:"Step 4: Update token CLI"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Add ",(0,i.jsx)(s.code,{children:"--permissions"})," flag to ",(0,i.jsx)(s.code,{children:"osapi token generate"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:["Update ",(0,i.jsx)(s.code,{children:"osapi token validate"})," to show resolved permissions."]}),"\n",(0,i.jsx)(s.li,{children:"Validate permission strings against known permissions."}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"step-5-custom-roles-in-config",children:"Step 5: Custom roles in config"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Add ",(0,i.jsx)(s.code,{children:"api.server.security.roles"})," config section."]}),"\n",(0,i.jsx)(s.li,{children:"Merge custom roles with built-in roles at startup."}),"\n",(0,i.jsx)(s.li,{children:"Validate that custom role permissions reference known permissions."}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"step-6-integration-tests",children:"Step 6: Integration tests"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Test each endpoint with tokens that have exactly the right permission (should\nsucceed) and tokens missing it (should 403)."}),"\n",(0,i.jsxs)(s.li,{children:["Test backward compatibility: old ",(0,i.jsx)(s.code,{children:'roles: ["admin"]'})," tokens still work."]}),"\n",(0,i.jsxs)(s.li,{children:["Test ",(0,i.jsx)(s.code,{children:"permissions"})," claim override bypasses role resolution."]}),"\n",(0,i.jsx)(s.li,{children:"Test custom roles from config."}),"\n",(0,i.jsxs)(s.li,{children:["Test that user identity (",(0,i.jsx)(s.code,{children:"sub"}),") is available in request context."]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"step-7-documentation",children:"Step 7: Documentation"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Update ",(0,i.jsx)(s.code,{children:"docs/docs/sidebar/configuration.md"})," with new roles config."]}),"\n",(0,i.jsx)(s.li,{children:"Add RBAC section to architecture docs explaining the permission model."}),"\n",(0,i.jsxs)(s.li,{children:["Update token generation docs with ",(0,i.jsx)(s.code,{children:"--permissions"})," examples."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"notes",children:"Notes"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Keep the built-in roles simple \u2014 three is enough for most deployments. Custom\nroles handle the edge cases."}),"\n",(0,i.jsxs)(s.li,{children:["Permission strings use ",(0,i.jsx)(s.code,{children:"resource:verb"})," not ",(0,i.jsx)(s.code,{children:"resource.verb"})," to avoid confusion\nwith NATS subject dots."]}),"\n",(0,i.jsxs)(s.li,{children:["The ",(0,i.jsx)(s.code,{children:"admin"})," role should always be a superset of all permissions."]}),"\n",(0,i.jsxs)(s.li,{children:["This is a prerequisite for audit logging \u2014 once RBAC is in place, audit\nmiddleware can read ",(0,i.jsx)(s.code,{children:"auth.subject"})," from context."]}),"\n",(0,i.jsxs)(s.li,{children:["Consider adding a ",(0,i.jsx)(s.code,{children:"deny"})," list later for temporary permission revocation\nwithout regenerating tokens."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"outcome",children:"Outcome"}),"\n",(0,i.jsxs)(s.p,{children:["Implemented fine-grained RBAC with ",(0,i.jsx)(s.code,{children:"resource:verb"})," permissions across all\ndomains. Key changes:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Created ",(0,i.jsx)(s.code,{children:"internal/authtoken/permissions.go"})," with permission constants,\n",(0,i.jsx)(s.code,{children:"DefaultRolePermissions"})," map, ",(0,i.jsx)(s.code,{children:"ResolvePermissions()"}),", and ",(0,i.jsx)(s.code,{children:"HasPermission()"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:["Added ",(0,i.jsx)(s.code,{children:"Permissions []string"})," to ",(0,i.jsx)(s.code,{children:"CustomClaims"})," and updated ",(0,i.jsx)(s.code,{children:"Generate()"}),"\nsignature."]}),"\n",(0,i.jsxs)(s.li,{children:["Added ",(0,i.jsx)(s.code,{children:"CustomRole"})," struct and ",(0,i.jsx)(s.code,{children:"Roles"})," config to ",(0,i.jsx)(s.code,{children:"ServerSecurity"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:["Updated all 4 OpenAPI specs (",(0,i.jsx)(s.code,{children:"system"}),", ",(0,i.jsx)(s.code,{children:"network"}),", ",(0,i.jsx)(s.code,{children:"job"}),", ",(0,i.jsx)(s.code,{children:"health"}),") to use\n",(0,i.jsx)(s.code,{children:"resource:verb"})," scopes and regenerated code."]}),"\n",(0,i.jsxs)(s.li,{children:["Rewrote ",(0,i.jsx)(s.code,{children:"scopeMiddleware"})," to resolve permissions from roles/claims and inject\nuser identity (",(0,i.jsx)(s.code,{children:"auth.subject"}),", ",(0,i.jsx)(s.code,{children:"auth.roles"}),") into context."]}),"\n",(0,i.jsxs)(s.li,{children:["Added ",(0,i.jsx)(s.code,{children:"--permissions/-p"})," flag to ",(0,i.jsx)(s.code,{children:"osapi token generate"})," CLI."]}),"\n",(0,i.jsxs)(s.li,{children:["Updated ",(0,i.jsx)(s.code,{children:"osapi token validate"})," to show resolved effective permissions."]}),"\n",(0,i.jsx)(s.li,{children:"Added RBAC integration tests to all 13 authenticated endpoints across system\n(2), network (3), job (7), and health (1) domains."}),"\n",(0,i.jsxs)(s.li,{children:["Renamed existing integration tests to ",(0,i.jsx)(s.code,{children:"*Validation()"})," pattern."]}),"\n",(0,i.jsx)(s.li,{children:"Documented JWT signing trust model, token structure, permission resolution,\nand custom roles in architecture and configuration docs."}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453(e,s,n){n.d(s,{R:()=>d,x:()=>o});var i=n(96540);const r={},t=i.createContext(r);function d(e){const s=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);