---
debug: false

api:
  client:
    url: http://127.0.0.1:8080
    security:
      bearer_token: placeholder
  server:
    port: 8080
    nats:
      host: localhost
      port: 4222
      client_name: osapi-api-integration
      namespace: ""
      auth:
        type: none
    security:
      signing_key: 111fdb0cfd9788fa6af8815f856a0374bf7a0174ad62fa8b98ec07a55f68d8d8
      cors:
        allow_origins: []

nats:
  server:
    host: localhost
    port: 4222
    store_dir: .nats/jetstream/
    namespace: ""
    auth:
      type: none

  stream:
    name: JOBS
    subjects: jobs.>
    max_age: 24h
    max_msgs: 10000
    storage: memory
    replicas: 1
    discard: old

  kv:
    bucket: job-queue
    response_bucket: job-responses
    ttl: 1h
    max_bytes: 104857600
    storage: memory
    replicas: 1

  audit:
    bucket: audit-log
    ttl: 720h
    max_bytes: 52428800
    storage: memory
    replicas: 1

  registry:
    bucket: agent-registry
    ttl: 30s
    storage: memory
    replicas: 1

  dlq:
    max_age: 7d
    max_msgs: 1000
    storage: memory
    replicas: 1

agent:
  nats:
    host: localhost
    port: 4222
    client_name: osapi-agent-integration
    namespace: ""
    auth:
      type: none
  consumer:
    name: jobs-agent
    max_deliver: 5
    ack_wait: 2m
    max_ack_pending: 1000
    replay_policy: instant
    back_off:
      - 30s
      - 2m
      - 5m
      - 15m
      - 30m
  queue_group: job-agents
  hostname: ""
  max_jobs: 10
