---
debug: false

api:
  client:
    url: http://0.0.0.0:8080
    security:
      bearer_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlcyI6WyJhZG1pbiJdLCJpc3MiOiJvc2FwaSIsInN1YiI6InRlc3RAY2kiLCJhdWQiOlsiaHR0cHM6Ly9sb2NhbGhvc3QiLCJodHRwOi8vbG9jYWxob3N0Il0sImV4cCI6MTc3ODk2NDQ0NiwiaWF0IjoxNzcxMjc4NDQ2fQ.d9Rh86HUON7eXCL5l3LKiFhakkXXK6kGHnU8ZXIgQ-c
  server:
    port: 8080
    nats:
      host: localhost
      port: 4222
      client_name: osapi-api-test
    security:
      signing_key: 111fdb0cfd9788fa6af8815f856a0374bf7a0174ad62fa8b98ec07a55f68d8d8
      cors:
        allow_origins:
          - http://localhost:3001
          - https://osapi-io.github.io

nats:
  server:
    host: localhost
    port: 4222
    store_dir: .nats/jetstream/

job:
  stream_name: JOBS
  stream_subjects: jobs.>
  kv_bucket: job-queue
  kv_response_bucket: job-responses
  consumer_name: jobs-worker

  stream:
    max_age: 24h
    max_msgs: 10000
    storage: file
    replicas: 1
    discard: old

  consumer:
    max_deliver: 5
    ack_wait: 2m
    max_ack_pending: 1000
    replay_policy: instant
    back_off:
      - 30s
      - 2m
      - 5m
      - 15m
      - 30m

  kv:
    ttl: 1h
    max_bytes: 104857600
    storage: file
    replicas: 1

  dlq:
    max_age: 7d
    max_msgs: 1000
    storage: file
    replicas: 1

  worker:
    nats:
      host: localhost
      port: 4222
      client_name: osapi-job-worker-test
    queue_group: job-workers
    hostname: ""
    max_jobs: 10
